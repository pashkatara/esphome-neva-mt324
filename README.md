# esphome-neva-mt324
ESPHome Component for Neva MT 324 Smart Meter
Компонент ESPHome для считывания показаний счетчика электроэнергии Нева МТ 324 (и серии MT 3xx) по интерфейсу RS-485.

Позволяет получить данные о напряжении, токе, мощности и тарифах в Home Assistant без использования инфракрасного порта (оптопары), через надежное проводное подключение.

Neva MT324

Особенности
Чтение данных через RS-485 (протокол IEC 62056-21 / OBIS).
Поддержка трехфазных показаний: Напряжение (V), Ток (A), Мощность (W).
Чтение тарифов: Т1, Т2, Общий счетчик.
Автоматическая авторизация в счетчике.
Интеграция с Home Assistant через ESPHome.
Поддерживаемые счетчики
Тестировалось на:

Нева МТ 324 AR 1.0 (Tariff 2.0)
Возможно работает с другими моделями серии Нева МТ (314, 323), поддерживающими протокол OBIS-Z.
<img width="610" height="566" alt="neva324" src="https://github.com/user-attachments/assets/63081c07-e093-4cd7-9f60-cef4df3b492d" />
![uart_ttl_to_rs485_two-way_converter_06](https://github.com/user-attachments/assets/bc24653a-bb71-49cc-9d7e-c6466fe1d471)
# Необходимое оборудование
ESP32 (или ESP8266, но пример для ESP32).
Модуль RS-485 to TTL (на чипе MAX485 или аналогичном).
Важно: Если модуль не имеет автоопределения направления (DE/RE пины), их нужно замкнуть вместе и подключить к пину управления или замкнуть на передачу (см. схему).
Провода для подключения к клеммам счетчика.
Подключение (Wiring)
Клеммы счетчика
Нева МТ 324 имеет клеммы интерфейса EIA485:

A+ (Line A)
B- (Line B)
Схема (ESP32 + MAX485)
ESP32 RS485 Module Счетчик (Meter)
<img width="658" height="867" alt="Screenshot_8" src="https://github.com/user-attachments/assets/77957205-1ffd-4acd-b56d-39694588916f" />
